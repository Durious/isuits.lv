import{T as f}from"./TextInput.f4f909b7.js";import{L as k}from"./LoadingButton.323ea2dd.js";import{B as w}from"./Button.49cfcc8c.js";import"./lodash.0426edb4.js";import{_ as L,r as x,o as g,c as u,a,t as c,F as h,g as v,b as m,w as y,h as b,f as p}from"./app.d8289e67.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const C={components:{TextInput:f,LoadingButton:k,Button:w},props:{lang_array:[]},data(){return{errors:{},sending:!1,lang_json:[],lang_array:[],lang_content:[],form:{},current_index:"",current_value:"",current_lang:"en",lang:"",new_index:0,current_key:"",new_key:"",input_valid:1}},mounted(){this.getLanguages(),this.selectLang("en")},methods:{newLang(){if(this.lang_content.hasOwnProperty("newField")){alert("You should delete or modify the key 'newField'. Please retry.");return}this.lang_content={...this.lang_content,newField:""}},saveLang(){this.sending=!0,this.errors={},console.log(this.current_lang),console.log(this.lang_content),this.$inertia.post(this.route("settings.save_language"),{data:this.lang_content,lang:this.current_lang},{onError:e=>{this.errors=e,this.sending=!1},onFinish:()=>{this.sending=!1}})},getLanguages(){fetch(this.route("settings.get_languages")).then(e=>{e.json().then(t=>{var o=t;for(let l=0;l<o.length;l++)this.lang_array.push({value:o[l].toUpperCase()})})})},selectLang(e){var t=e;fetch(this.route("settings.get_lang_json",{lang:t})).then(o=>{o.json().then(l=>{this.lang_content=l})})},submitSaveLang(e){console.log(this.current_index,this.current_value),console.log(this.form),this.current_lang=="en"?enJson[this.current_index]=this.current_value:this.current_lang=="lv"&&(lvJson[this.current_index]=this.current_value)},getValue(e){this.form[e.target.name]=e.target.value,this.current_index=e.target.name},onChangeForm(e){this.lang_content[e.target.name]=e.target.value,this.form[e.target.name]=e.target.value,this.current_value=e.target.value},onSelectAction(e){var t=e.target.value;console.log(t),this.current_lang=t,this.selectLang(this.current_lang)},onChangeNewIndex(e){var t="val";console.log(t)},onChangeNewValue(e){console.log(e.target.name)},getKey(e){this.input_valid==1&&(this.current_key=e.target.value,console.log(this.current_key))},setKey(e){if(e.target.value==""){alert("The key you input is empty. Please input valid key!"),this.input_valid=0;return}else if(this.lang_content.hasOwnProperty(e.target.value)){alert("The key you input already exists. Please input new key."),this.input_valid=0;return}else this.input_valid=1,this.new_key=e.target.value,console.log(this.current_key),this.lang_content[this.new_key]=this.lang_content[this.current_key],delete this.lang_content[this.current_key],this.current_key=this.new_key,console.log(this.lang_content[this.current_key])}}},S={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},F={class:"caption-div"},V={class:"form-label"},K=["label"],N=["value"],T={class:"bg-white rounded shadow overflow-hidden max-w-3xl content-panel"},A=b('<div class="editor-title"><p>SET LANGUAGE KEYS &amp; VALUES</p></div><div class="editor-header"><form class="lang-item"><div class="lang-index header">Main Languages</div><div class="lang-value header">Translated Languages</div></form></div>',2),B={id:"json-list"},E=["value"],j=["value","name"],P={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"},U={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"};function G(e,t,o,l,d,n){const _=x("loading-button");return g(),u(h,null,[a("div",S,[a("div",F,[a("label",V,c(e.$t("Select Language")),1),a("select",{class:"form-control lang-select",onChange:t[0]||(t[0]=r=>n.onSelectAction(r)),label:e.$t("Select Language")},[(g(!0),u(h,null,v(d.lang_array,(r,i)=>(g(),u("option",{key:i,value:r.value},c(r.value),9,N))),128))],40,K)])]),a("div",T,[A,a("div",B,[(g(!0),u(h,null,v(d.lang_content,(r,i)=>(g(),u("div",{class:"lang-item",key:i},[a("input",{class:"lang-index",value:i,onClick:t[1]||(t[1]=(...s)=>n.getKey&&n.getKey(...s)),onChange:t[2]||(t[2]=(...s)=>n.setKey&&n.setKey(...s))},null,40,E),a("input",{value:r,name:i,class:"lang-value",onClick:t[3]||(t[3]=(...s)=>n.getValue&&n.getValue(...s)),onChange:t[4]||(t[4]=s=>n.onChangeForm(s))},null,40,j)]))),128))]),a("div",P,[m(_,{class:"btn-gray ltr:ml-auto rtl:mr-auto",onClick:n.newLang},{default:y(()=>[p(c(e.$t("Add More Field")),1)]),_:1},8,["onClick"])]),a("div",U,[m(_,{loading:d.sending,class:"btn-gray ltr:ml-auto rtl:mr-auto",onClick:n.saveLang},{default:y(()=>[p(c(e.$t("Submit")),1)]),_:1},8,["loading","onClick"])])])],64)}const z=L(C,[["render",G]]);export{z as default};
