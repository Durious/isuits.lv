import{p as M}from"./pickBy.bd80f484.js";import{t as S}from"./throttle.7e7db953.js";import{L as $}from"./Layout.c268843b.js";import{S as P,m as V}from"./SearchFilter.6af03689.js";import{P as B}from"./Pagination.cc1280e3.js";import{M as F}from"./Modal.44e047a5.js";import{F as L}from"./FileInput.bfc636d8.js";import{B as I}from"./Button.49cfcc8c.js";import{L as j}from"./LoadingButton.323ea2dd.js";import{_ as D,r as c,o as p,c as _,a as e,t as o,b as l,w as m,F as N,g as E,e as w,d as x,f,k as O}from"./app.d8289e67.js";import"./debounce.9b400763.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const R={layout:$,props:{products:Object,search:String},components:{Pagination:B,SearchFilter:P,Modal:F,FileInput:L,Button:I,LoadingButton:j},data(){return{form:{search:this.search,csv:null},viewModal:!1,sending:!1}},watch:{form:{handler:S(function(){let t=M(this.form);this.$inertia.replace(this.route("products",Object.keys(t).length?t:{remember:"forget"}))},250),deep:!0}},metaInfo(){return{title:this.$tc("Product",2)}},methods:{rowClicked(t){this.$inertia.visit(this.route("products.edit",t))},reset(){this.form=V(this.form,()=>null)},closeModal(){this.viewModal=!1,this.sending=!1},importProducts(){this.form.csv=null,this.viewModal=!0},async exportProducts(){this.$axios.post(this.route("products.export")).then(t=>{const s=new Date,i=s.getFullYear(),y=(s.getMonth()+1).toString().padStart(2,"0"),n=s.getDate().toString().padStart(2,"0"),a=s.getHours().toString().padStart(2,"0"),g=s.getMinutes().toString().padStart(2,"0"),u=s.getSeconds().toString().padStart(2,"0"),h=`products_${i}_${y}_${n}_${a}_${g}_${u}.csv`;var b="\uFEFF",d=window.document.createElement("a");d.setAttribute("href","data:text/csv; charset=utf-8,"+encodeURIComponent(b+t.data)),d.setAttribute("download",h),window.document.body.appendChild(d),d.click()})},submit(){if(!this.sending&&!!this.form.csv){this.sending=!0;var t=new FormData;t.append("csv",this.form.csv||""),this.$inertia.post(this.route("products.import"),t,{onFinish:s=>{const i=this;setTimeout(function(){i.viewModal=!1},2e3),this.sending=!1}})}}}},T={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},U={class:"np mb-6 flex justify-between items-center"},z={class:"inline md:hidden"},A={class:"hidden md:inline"},q={class:"bg-white rounded shadow overflow-x-auto scroll-on-light"},H={class:"w-full whitespace-no-wrap"},Y={class:"text-left font-bold"},G={class:"px-6 pt-6 pb-4"},J={class:"px-6 pt-6 pb-4"},K={class:"px-6 pt-6 pb-4"},Q={class:"px-6 pt-6 pb-4"},W={class:"px-6 pt-6 pb-4"},X={class:"px-6 pt-6 pb-4"},Z=["onClick"],tt={class:"border-t px-6 py-4"},et={class:"flex items-center"},ot={class:"border-t px-6 py-4"},st={class:"flex items-center"},rt={class:"border-t px-6 py-4 max-w-lg truncate"},nt={class:"border-t px-6 py-4 max-w-lg truncate"},lt=["src"],at={class:"border-t px-6 py-4 max-w-lg truncate"},it={class:"border-t px-6 py-4 max-w-lg truncate"},ct={class:"border-t px-6 py-4 w-8"},dt={key:0},pt={class:"border-t px-6 py-4",colspan:"5"},mt={class:"px-8 pb-8 pt-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ut={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end"};function ht(t,s,i,y,n,a){const g=c("search-filter"),u=c("Button"),h=c("Icons"),b=c("Link"),d=c("pagination"),v=c("file-input"),k=c("loading-button"),C=c("Modal");return p(),_("div",null,[e("h1",T,o(t.$tc("Product",2)),1),e("div",U,[l(g,{modelValue:n.form.search,"onUpdate:modelValue":s[0]||(s[0]=r=>n.form.search=r),dropdown:!1,class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:a.reset},null,8,["modelValue","onReset"]),e("div",null,[l(u,{class:"btn-gray mr-4",type:"button",onClick:a.importProducts},{default:m(()=>[f(o(t.$t("import_x",{x:t.$tc("Product")})),1)]),_:1},8,["onClick"]),l(u,{class:"btn-gray mr-4",type:"button",onClick:a.exportProducts},{default:m(()=>[f(o(t.$t("export_x",{x:t.$tc("Product")})),1)]),_:1},8,["onClick"]),l(b,{class:"btn-gray",href:t.route("products.create")},{default:m(()=>[e("span",z,[l(h,{name:"add",class:"w-4 h-4 text-white group-hover:text-white fill-white"})]),e("span",A,o(t.$t("create_x",{x:t.$tc("Product")})),1)]),_:1},8,["href"])])]),e("div",q,[e("table",H,[e("thead",null,[e("tr",Y,[e("th",G,o(t.$t("Name")),1),e("th",J,o(t.$t("Category")),1),e("th",K,o(t.$t("Type")),1),e("th",Q,o(t.$t("Photo")),1),e("th",W,o(t.$t("Price")),1),e("th",X,o(t.$t("Description")),1)])]),e("tbody",null,[(p(!0),_(N,null,E(i.products.data,r=>(p(),_("tr",{key:r.id,onClick:ft=>a.rowClicked(r.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[e("td",tt,[e("div",et,[f(o(r.name)+" ",1),r.deleted_at?(p(),x(h,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):w("",!0)])]),e("td",ot,[e("div",st,o(r.category.name),1)]),e("td",rt,o(t.$capitalize(r.type)),1),e("td",nt,[e("img",{src:"/storage/product/"+r.main_photo,alt:"product-photo",class:"h-12 object-cover"},null,8,lt)]),e("td",at,o(r.price),1),e("td",it,o(r.description),1),e("td",ct,[l(h,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,Z))),128)),i.products.data.length===0?(p(),_("tr",dt,[e("td",pt,o(t.$t("no_x_found",{x:t.$tc("Product")})),1)])):w("",!0)])])]),l(d,{links:i.products.links,meta:i.products.meta},null,8,["links","meta"]),n.viewModal?(p(),x(C,{key:0,show:n.viewModal,"max-width":"2xl",closeable:!0,onClose:s[3]||(s[3]=()=>n.viewModal=!1)},{default:m(()=>[e("form",{onSubmit:s[2]||(s[2]=O((...r)=>a.submit&&a.submit(...r),["prevent"])),autocomplete:"off"},[e("div",mt,[l(v,{type:"file",accept:"text/csv",label:t.$t("Pick CSV file."),modelValue:n.form.csv,"onUpdate:modelValue":s[1]||(s[1]=r=>n.form.csv=r),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"])]),e("div",ut,[l(k,{loading:n.sending,class:"btn-gray",type:"submit"},{default:m(()=>[f(o(t.$t("import_x",{x:t.$tc("Products")})),1)]),_:1},8,["loading"]),l(u,{class:"btn-gray ml-4",type:"button",onClick:a.closeModal},{default:m(()=>[f(o(t.$tc("Close")),1)]),_:1},8,["onClick"])])],32)]),_:1},8,["show"])):w("",!0)])}const Ft=D(R,[["render",ht]]);export{Ft as default};
