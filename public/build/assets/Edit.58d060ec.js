import{_ as J,G as K,r as m,o as n,c as p,a as o,b as r,w as _,f as b,t as i,d as w,e as c,k as Q,n as E,F as g,g as y}from"./app.d8289e67.js";import{g as X}from"./debounce.9b400763.js";import{L as Y}from"./Layout.c268843b.js";import{M as Z}from"./Modal.44e047a5.js";import{B as $}from"./Button.49cfcc8c.js";import{d as ee}from"./DeleteMixin.d312fa19.js";import{F as te}from"./FileInput.bfc636d8.js";import{T as le}from"./TextInput.f4f909b7.js";import{T as oe}from"./TextareaInput.1737678e.js";import{L as se}from"./LoadingButton.323ea2dd.js";import{T as re}from"./TrashedMessage.7363da80.js";import ie from"./ReviewModal.fa051f1c.js";import ne from"./CommentModal.34453b42.js";import{D as me}from"./DeleteRestoreComponent.725db004.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";import"./lodash.0426edb4.js";import"./VueStarRating.common.df2cc132.js";import"./Dialog.05b0b37c.js";const pe={layout:Y,remember:"form",props:{product:Object,icategories:Object,ireviews:Object,icustomers:Object,icomments:Object},mixins:[ee("product")],components:{Modal:Z,Button:$,TextInput:le,FileInput:te,ReviewModal:ie,CommentModal:ne,LoadingButton:se,TextareaInput:oe,TrashedMessage:re,DeleteRestoreComponent:me},data(){return{errors:{},restore:!1,sending:!1,form:{main_photo:this.product.main_photo,name:this.product.name,price:this.product.price,type:this.product.type,category_id:this.product.category.id,description:this.product.description,deleted_at:this.product.deleted_at,sub_photos:[],small_burst:this.product.small_burst,small_waist:this.product.small_waist,small_hips:this.product.small_hips,medium_burst:this.product.medium_burst,medium_waist:this.product.medium_waist,medium_hips:this.product.medium_hips,large_burst:this.product.large_burst,large_waist:this.product.large_waist,large_hips:this.product.large_hips},categories:[],category:{value:this.product.category.id,label:this.product.category.name},types:[{label:"Men",value:"men"},{label:"Women",value:"women"}],type:{label:K(this.product.type),value:this.product.type},reviews:[],comments:[],review:null,viewReview:!1,viewComment:!1}},watch:{category:function(e){this.form.category_id=e?e.value:null},type:function(e){this.form.type=e?e.value:null},ireviews:function(e){this.reviews=e},icomments:function(e){this.comments=e}},mounted(){this.categories=this.icategories,this.reviews=this.ireviews,this.comments=this.icomments,console.log(this.comments),this.product.sub_photos&&(this.form.sub_photos=this.product.sub_photos.split(",").map(e=>({file:e})))},methods:{addOption(){this.form.sub_photos.push({file:""})},removeOption(){this.form.sub_photos.pop()},submit(){this.sending=!0;var e=new FormData;e.append("name",this.form.name||""),e.append("type",this.form.type||""),e.append("price",this.form.price||""),e.append("main_photo",this.form.main_photo||""),e.append("category_id",this.form.category_id||""),e.append("description",this.form.description||""),e.append("small_burst",this.form.small_burst||""),e.append("small_waist",this.form.small_waist||""),e.append("small_hips",this.form.small_hips||""),e.append("medium_burst",this.form.medium_burst||""),e.append("medium_waist",this.form.medium_waist||""),e.append("medium_hips",this.form.medium_hips||""),e.append("large_burst",this.form.large_burst||""),e.append("large_waist",this.form.large_waist||""),e.append("large_hips",this.form.large_hips||""),this.form.sub_photos.forEach((l,a)=>{e.append(`sub_photos[${a}]`,l.file||"")}),this.$inertia.post(this.route("products.update",this.product.id),e,{onError:l=>{this.errors=l},onFinish:()=>{this.sending=!1}})},searchCategories(e,l){e&&(l(!0),this.searchingCategories(l,e,this))},searchingCategories:X((e,l,a)=>{fetch(a.route("ajax.categories")+"?search="+escape(l)).then(v=>{v.json().then(t=>a.categories=t),e(!1)})},350),showReviewModal(e){this.review=this.reviews.find(l=>l.id===e),this.viewReview=!0},showCommentModal(e){this.comment=this.comments.find(l=>l.id===e),console.log(this.comment),this.viewComment=!0}}},ae={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},de=o("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),ue={class:"w-full flex flex-wrap"},ce={class:"w-full md:w-2/5 md:pr-5"},he={class:"bg-white rounded shadow overflow-hidden"},fe={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},_e={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},be={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},we={class:"form-label",for:"category_id"},ge={key:0,class:"form-error"},ye={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ve={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},xe={class:"form-label",for:"type"},Ve={key:0,class:"form-error"},Ce={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ke={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},Me={class:"w-full flex items-center justify-end mt-5 mb-6 gap-4 ltr:pr-6 rtl:pl-6"},Re=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),Ue=[Re],je=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12h-15"})],-1),Be=[je],Oe={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},Le={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},Te=o("h3",null,"Size",-1),Pe={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-between items-center"},Se={class:"w-full md:w-3/5 md:pl-5"},De={class:"bg-white rounded shadow"},Fe={class:"flex items-center justify-between"},Ee={class:"font-bold text-lg px-6 pt-6 pb-4"},Ie=o("div",{class:"px-6 pt-6"},null,-1),Ne={class:"overflow-x-auto scroll-on-light"},We={class:"w-full whitespace-no-wrap"},ze={class:"text-left font-bold"},He={class:"px-6 pt-6 pb-4"},Ge={class:"px-6 pt-6 pb-4"},qe={class:"px-6 pt-6 pb-4"},Ae={class:"px-6 pt-6 pb-4",colspan:"2"},Je=["onClick"],Ke={class:"border-t px-6 py-4"},Qe={class:"flex items-center"},Xe={class:"border-t px-6 py-4"},Ye={class:"border-t px-6 py-4"},Ze={class:"border-t px-6 py-4 max-w-md truncate"},$e={class:"border-t px-6 py-4 w-8"},et={key:0},tt={class:"border-t px-6 py-4",colspan:"5"},lt={class:"bg-white rounded shadow",style:{"margin-top":"2em"}},ot={class:"flex items-center justify-between"},st={class:"font-bold text-lg px-6 pt-6 pb-4"},rt=o("div",{class:"px-6 pt-6"},null,-1),it={class:"overflow-x-auto scroll-on-light"},nt={class:"w-full whitespace-no-wrap"},mt={class:"text-left font-bold"},pt={class:"px-6 pt-6 pb-4"},at={class:"px-6 pt-6 pb-4",colspan:"2"},dt=["onClick"],ut={class:"border-t px-6 py-4"},ct={class:"flex items-center"},ht={class:"border-t px-6 py-4 max-w-md truncate"},ft={class:"border-t px-6 py-4 w-8"},_t={key:0},bt={class:"border-t px-6 py-4",colspan:"5"};function wt(e,l,a,v,t,u){var k,M,R,U,j,B,O,L,T,P,S,D,F;const h=m("Icons"),I=m("Link"),N=m("trashed-message"),d=m("text-input"),x=m("v-select"),V=m("file-input"),W=m("textarea-input"),z=m("DeleteRestoreComponent"),H=m("loading-button"),G=m("ReviewModal"),C=m("Modal"),q=m("CommentModal");return n(),p("div",null,[o("h1",ae,[r(I,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:e.route("products")},{default:_(()=>[r(h,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),b(" "+i(e.$tc("Product",2)),1)]),_:1},8,["href"]),de,b(" "+i(e.$t("Edit")),1)]),a.product.deleted_at?(n(),w(N,{key:0,class:"mb-6",onRestore:l[0]||(l[0]=()=>t.restore=!0)},{default:_(()=>[o("span",null,i(e.$t("already_deleted_x",{x:e.$tc("Product")})),1)]),_:1})):c("",!0),o("div",ue,[o("div",ce,[o("div",he,[o("form",{onSubmit:l[19]||(l[19]=Q((...s)=>u.submit&&u.submit(...s),["prevent"])),autocomplete:"off"},[o("div",fe,[r(d,{modelValue:t.form.name,"onUpdate:modelValue":l[1]||(l[1]=s=>t.form.name=s),errors:(k=t.errors)==null?void 0:k.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full",label:e.$t("Name")},null,8,["modelValue","errors","label"])]),o("div",_e,[o("div",be,[o("label",we,i(e.$tc("Category")),1),r(x,{modelValue:t.category,"onUpdate:modelValue":l[2]||(l[2]=s=>t.category=s),options:t.categories,"input-id":"category_id",onSearch:u.searchCategories,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Category",2)}),class:E({error:((M=t.errors)==null?void 0:M.category_id)&&((R=t.errors)==null?void 0:R.category_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),(U=t.errors)!=null&&U.category_id?(n(),p("div",ge,i((j=t.errors)==null?void 0:j.category_id[0]),1)):c("",!0)])]),o("div",ye,[o("div",ve,[o("label",xe,i(e.$tc("Type")),1),r(x,{modelValue:t.type,"onUpdate:modelValue":l[3]||(l[3]=s=>t.type=s),options:t.types,"input-id":"type",dir:e.$page.props.user.account.direction,placeholder:e.$t("select_x",{x:e.$tc("Type",1)}),class:E({error:((B=t.errors)==null?void 0:B.type)&&((O=t.errors)==null?void 0:O.type.length)})},null,8,["modelValue","options","dir","placeholder","class"]),(L=t.errors)!=null&&L.type?(n(),p("div",Ve,i((T=t.errors)==null?void 0:T.type),1)):c("",!0)])]),o("div",Ce,[r(d,{type:"number",label:e.$t("Price"),enableFloat:!0,modelValue:t.form.price,"onUpdate:modelValue":l[4]||(l[4]=s=>t.form.price=s),errors:(P=t.errors)==null?void 0:P.price,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","errors"])]),o("div",ke,[r(V,{type:"file",accept:"image/*",label:e.$t("Main Photo"),modelValue:t.form.main_photo,"onUpdate:modelValue":l[5]||(l[5]=s=>t.form.main_photo=s),error:(S=t.errors)==null?void 0:S.main_photo,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","error"])]),(n(!0),p(g,null,y(t.form.sub_photos,(s,f)=>(n(),p("div",{key:f,class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},[r(V,{type:"file",accept:"image/*",label:e.$t("Sub Photo")+" "+(f+1),modelValue:s.file,"onUpdate:modelValue":A=>s.file=A,error:t.errors["sub_photos."+f],class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","onUpdate:modelValue","error"])]))),128)),o("div",Me,[t.form.sub_photos.length<3?(n(),p("button",{key:0,type:"button",onClick:l[6]||(l[6]=(...s)=>u.addOption&&u.addOption(...s)),class:"bg-gray-700 px-3 py-1.5 rounded-md text-gray-50 hover:bg-gray-800"},Ue)):c("",!0),o("button",{type:"button",onClick:l[7]||(l[7]=(...s)=>u.removeOption&&u.removeOption(...s)),class:"bg-gray-700 px-3 py-1.5 rounded-md text-gray-50 hover:bg-gray-800"},Be)]),o("div",Oe,[r(W,{label:e.$t("Description"),modelValue:t.form.description,"onUpdate:modelValue":l[8]||(l[8]=s=>t.form.description=s),errors:(D=t.errors)==null?void 0:D.description,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","errors"])]),o("div",Le,[Te,r(d,{type:"text",label:e.$t("Small Burst"),modelValue:t.form.small_burst,"onUpdate:modelValue":l[9]||(l[9]=s=>t.form.small_burst=s),errors:(F=t.errors)==null?void 0:F.small_burst,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","errors"]),r(d,{type:"text",label:e.$t("Small Waist"),modelValue:t.form.small_waist,"onUpdate:modelValue":l[10]||(l[10]=s=>t.form.small_waist=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Small Hips"),modelValue:t.form.small_hips,"onUpdate:modelValue":l[11]||(l[11]=s=>t.form.small_hips=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Medium Burst"),modelValue:t.form.medium_burst,"onUpdate:modelValue":l[12]||(l[12]=s=>t.form.medium_burst=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Medium Waist"),modelValue:t.form.medium_waist,"onUpdate:modelValue":l[13]||(l[13]=s=>t.form.medium_waist=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Medium Hips"),modelValue:t.form.medium_hips,"onUpdate:modelValue":l[14]||(l[14]=s=>t.form.medium_hips=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Large Burst"),modelValue:t.form.large_burst,"onUpdate:modelValue":l[15]||(l[15]=s=>t.form.large_burst=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Large Waist"),modelValue:t.form.large_waist,"onUpdate:modelValue":l[16]||(l[16]=s=>t.form.large_waist=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"]),r(d,{type:"text",label:e.$t("Large Hips"),modelValue:t.form.large_hips,"onUpdate:modelValue":l[17]||(l[17]=s=>t.form.large_hips=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"])]),o("div",Pe,[r(z,{restore:t.restore,data:a.product,permanentEnable:!1,model:"Product",routeM:"products",onCloseRestore:l[18]||(l[18]=()=>t.restore=!1)},null,8,["restore","data"]),r(H,{loading:t.sending,class:"btn-gray",type:"submit"},{default:_(()=>[b(i(e.$t("update_x",{x:e.$tc("Product")})),1)]),_:1},8,["loading"])])],32)])]),o("div",Se,[o("div",De,[o("div",Fe,[o("h3",Ee,i(e.$t("Product Reviews")),1),Ie]),o("div",Ne,[o("table",We,[o("tr",ze,[o("th",He,i(e.$t("Customer")),1),o("th",Ge,i(e.$tc("Title")),1),o("th",qe,i(e.$tc("Rate")),1),o("th",Ae,i(e.$tc("Content")),1)]),(n(!0),p(g,null,y(t.reviews,s=>(n(),p("tr",{key:s.id,onClick:f=>u.showReviewModal(s.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[o("td",Ke,[o("div",Qe,[b(i(s.customer.name)+" ",1),s.deleted_at?(n(),w(h,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):c("",!0)])]),o("td",Xe,i(s.title),1),o("td",Ye,i(s.rate),1),o("td",Ze,i(s.content),1),o("td",$e,[r(h,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,Je))),128)),t.reviews.length===0?(n(),p("tr",et,[o("td",tt,i(e.$t("no_x_found",{x:e.$tc("Review")})),1)])):c("",!0)])])]),o("div",lt,[o("div",ot,[o("h3",st,i(e.$t("Product Comments")),1),rt]),o("div",it,[o("table",nt,[o("tr",mt,[o("th",pt,i(e.$t("Customer")),1),o("th",at,i(e.$tc("Comment")),1)]),(n(!0),p(g,null,y(t.comments,s=>(n(),p("tr",{key:s.id,onClick:f=>u.showCommentModal(s.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[o("td",ut,[o("div",ct,[b(i(s.customer.name)+" ",1),s.deleted_at?(n(),w(h,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):c("",!0)])]),o("td",ht,i(s.comment),1),o("td",ft,[r(h,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,dt))),128)),t.reviews.length===0?(n(),p("tr",_t,[o("td",bt,i(e.$t("no_x_found",{x:e.$tc("Comment")})),1)])):c("",!0)])])])])]),r(C,{show:t.viewReview,"max-width":"2xl",closeable:!0,onClose:l[21]||(l[21]=s=>t.viewReview=!1)},{default:_(()=>[r(G,{review:t.review,show:t.viewReview,customers:a.icustomers,product_id:a.product.id,onClose:l[20]||(l[20]=()=>t.viewReview=!1)},null,8,["review","show","customers","product_id"])]),_:1},8,["show"]),r(C,{show:t.viewComment,"max-width":"2xl",closeable:!0,onClose:l[23]||(l[23]=s=>t.viewComment=!1)},{default:_(()=>[r(q,{comment:e.comment,show:t.viewComment,customers:a.icustomers,product_id:a.product.id,onClose:l[22]||(l[22]=()=>t.viewComment=!1)},null,8,["comment","show","customers","product_id"])]),_:1},8,["show"])])}const Nt=J(pe,[["render",wt]]);export{Nt as default};
