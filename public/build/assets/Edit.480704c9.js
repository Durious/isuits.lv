import{L as T}from"./Layout.c268843b.js";import{M as j}from"./Modal.44e047a5.js";import{B as I}from"./Button.49cfcc8c.js";import{d as R}from"./DeleteMixin.d312fa19.js";import{T as U}from"./TextInput.f4f909b7.js";import{S as F}from"./SelectInput.26b459a9.js";import{L as O}from"./LoadingButton.323ea2dd.js";import{T as H}from"./TrashedMessage.7363da80.js";import Z from"./BillingModal.425b0c30.js";import J from"./ShippingModal.0b72189f.js";import{D as P}from"./DeleteRestoreComponent.725db004.js";import{_ as q,r as c,o as d,c as a,a as e,b as i,w as p,f as h,t,d as y,e as _,k as w,F as k,g as C}from"./app.d8289e67.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";import"./lodash.0426edb4.js";import"./TextareaInput.1737678e.js";import"./Dialog.05b0b37c.js";const G={layout:T,remember:"form",props:{customer:Object},mixins:[R("customer")],components:{Modal:j,Button:I,TextInput:U,SelectInput:F,BillingModal:Z,ShippingModal:J,LoadingButton:O,TrashedMessage:H,DeleteRestoreComponent:P},metaInfo(){return{title:this.$t("edit_x",{x:this.form.name})}},watch:{customer:function(s){this.shipping_addresses=s.shipping_addresses,this.billing_addresses=s.billing_addresses}},data(){return{restore:!1,sending:!1,form:{name:this.customer.name,email:this.customer.email,phone:this.customer.phone,address:this.customer.address,description:this.customer.description},shipping_addresses:this.customer.shipping_addresses,shippingAddress:null,viewShipping:!1,billing_addresses:this.customer.billing_addresses,billingAddress:null,viewBilling:!1}},methods:{rowClicked(s){this.$inertia.visit(this.route("measurements.edit",s))},submit(){this.sending=!0,this.$inertia.put(this.route("customers.update",this.customer.id),this.form,{onFinish:()=>this.sending=!1})},displayExtra(s){let l="";return Array.isArray(s)&&s.map((u,D)=>{for(let[r,n]of Object.entries(u))if(n.includes("{")&&n.includes("}")&&n.includes(":")){l+=`<span class="inline-block"><strong>${r}</strong>: `;const m=JSON.parse(n);for(let[x,v]of Object.entries(m))v?l+=`<span class="inline-block text-green-600 ltr:mr-2 rtl:ml-2">&#10003; ${x},</span> `:l+=`<span class="inline-block text-red-500 ltr:mr-2 rtl:ml-2">&#10005; ${x},</span> `;l+="</span>"}else l+=`<span class="inline-block"><strong>${r}</strong>: ${n},</span> `}),l},setShippingDefault(s){this.$inertia.post(this.route("customer_info.shipping.default"),{shipping_address_id:s,customer_id:this.customer.id},{onError:l=>{this.errors=l}})},deleteShipping(s){this.$inertia.delete(this.route("customer_info.shipping.delete",s),null,{onError:l=>{this.errors=l}})},showShippingModal(s){this.shippingAddress=s,this.viewShipping=!0},setBillingDefault(s){this.$inertia.post(this.route("customer_info.billing.default"),{billing_address_id:s,customer_id:this.customer.id},{onError:l=>{this.errors=l}})},deleteBilling(s){this.$inertia.delete(this.route("customer_info.billing.delete",s),null,{onError:l=>{this.errors=l}})},showBillingModal(s){this.billingAddress=s,this.viewBilling=!0}}},K={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},Q=e("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),W={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},X={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},Y={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ss={class:"np px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"},es={class:"mt-12 flex align-center justify-between"},ts={class:"font-bold text-2xl"},os={class:"mt-6 bg-white rounded shadow overflow-x-auto scroll-on-light"},ls={class:"w-full whitespace-no-wrap"},rs={class:"text-left font-bold"},is={class:"px-6 pt-6 pb-4"},ns={class:"px-6 pt-6 pb-4"},ds={class:"px-6 pt-6 pb-4"},as={class:"px-6 pt-6 pb-4"},ps={class:"px-6 pt-6 pb-4"},cs={class:"px-6 pt-6 pb-4"},hs={class:"px-6 pt-6 pb-4"},ms=["onClick"],us={class:"border-t px-6 py-4"},_s={class:"flex items-center"},fs={class:"border-t px-6 py-4"},gs={class:"border-t px-6 py-4"},bs={class:"border-t px-6 py-4"},ws={class:"border-t px-6 py-4"},xs={class:"border-t px-6 py-4"},ys={class:"border-t px-6 py-4"},vs={class:"flex items-center"},ks={key:0},Cs={class:"border-t px-6 py-4",colspan:"7"},$s={class:"mt-12 flex align-center justify-between"},Bs={class:"font-bold text-2xl"},Ss={class:"mt-6 bg-white rounded shadow overflow-x-auto scroll-on-light"},Ms={class:"w-full whitespace-no-wrap"},As={class:"text-left font-bold"},Vs={class:"px-6 pt-6 pb-4"},Ds={class:"px-6 pt-6 pb-4"},Es={class:"px-6 pt-6 pb-4"},Ls={class:"px-6 pt-6 pb-4"},Ns={class:"px-6 pt-6 pb-4"},zs={class:"px-6 pt-6 pb-4"},Ts={class:"px-6 pt-6 pb-4"},js=["onClick"],Is={class:"border-t px-6 py-4"},Rs={class:"flex items-center"},Us={class:"border-t px-6 py-4"},Fs={class:"border-t px-6 py-4"},Os={class:"border-t px-6 py-4"},Hs={class:"border-t px-6 py-4"},Zs={class:"border-t px-6 py-4"},Js={class:"border-t px-6 py-4"},Ps={class:"flex items-center"},qs={key:0},Gs={class:"border-t px-6 py-4",colspan:"7"},Ks={class:"mt-12 font-bold text-2xl"},Qs={class:"mt-6 bg-white rounded shadow overflow-x-auto scroll-on-light"},Ws={class:"w-full whitespace-no-wrap"},Xs={class:"text-left font-bold"},Ys={class:"px-6 pt-6 pb-4"},se={class:"px-6 pt-6 pb-4"},ee={class:"px-6 pt-6 pb-4"},te={class:"px-6 pt-6 pb-4",colspan:"2"},oe=["onClick"],le={class:"border-t px-6 py-4"},re={class:"flex items-center"},ie={class:"border-t px-6 py-4"},ne={key:0},de={class:"border-t px-6 py-4 w-56 max-w-sm",style:{"min-width":"250px"}},ae=["innerHTML"],pe={class:"border-t px-6 py-4"},ce={class:"border-t px-6 py-4 w-8"},he={key:0},me={class:"border-t px-6 py-4",colspan:"5"};function ue(s,l,u,D,r,n){var B,S,M,A,V;const m=c("Icons"),x=c("Link"),v=c("trashed-message"),b=c("text-input"),E=c("DeleteRestoreComponent"),L=c("loading-button"),f=c("Button"),N=c("ShippingModal"),$=c("Modal"),z=c("BillingModal");return d(),a("div",null,[e("h1",K,[i(x,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:s.route("customers")},{default:p(()=>[i(m,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),h(" "+t(s.$tc("Customer",2)),1)]),_:1},8,["href"]),Q,h(" "+t(r.form.name),1)]),u.customer.deleted_at?(d(),y(v,{key:0,class:"mb-6",onRestore:l[0]||(l[0]=()=>r.restore=!0)},{default:p(()=>[e("span",null,t(s.$t("already_deleted_x",{x:s.$tc("Customer")})),1)]),_:1})):_("",!0),e("div",W,[e("form",{onSubmit:l[7]||(l[7]=w((...o)=>n.submit&&n.submit(...o),["prevent"])),autocomplete:"off"},[e("div",X,[i(b,{modelValue:r.form.name,"onUpdate:modelValue":l[1]||(l[1]=o=>r.form.name=o),errors:(B=s.$page.props.errors)==null?void 0:B.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2",label:s.$t("Name")},null,8,["modelValue","errors","label"]),i(b,{label:s.$t("Phone"),modelValue:r.form.phone,"onUpdate:modelValue":l[2]||(l[2]=o=>r.form.phone=o),errors:(S=s.$page.props.errors)==null?void 0:S.phone,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"]),i(b,{label:s.$t("Email"),modelValue:r.form.email,"onUpdate:modelValue":l[3]||(l[3]=o=>r.form.email=o),errors:(M=s.$page.props.errors)==null?void 0:M.email,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"]),i(b,{label:s.$t("Address"),modelValue:r.form.address,"onUpdate:modelValue":l[4]||(l[4]=o=>r.form.address=o),errors:(A=s.$page.props.errors)==null?void 0:A.address,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"])]),e("div",Y,[i(b,{label:s.$t("Description"),modelValue:r.form.description,"onUpdate:modelValue":l[5]||(l[5]=o=>r.form.description=o),errors:(V=s.$page.props.errors)==null?void 0:V.description,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","errors"])]),e("div",ss,[i(E,{restore:r.restore,data:u.customer,model:"Customer",routeM:"customers",onCloseRestore:l[6]||(l[6]=()=>r.restore=!1)},null,8,["restore","data"]),i(L,{loading:r.sending,class:"btn-gray ltr:ml-auto rtl:mr-auto",type:"submit"},{default:p(()=>[h(t(s.$t("update_x",{x:s.$tc("Customer")})),1)]),_:1},8,["loading"])])],32)]),e("div",es,[e("h2",ts,t(s.$t("Shipping Address")),1),e("div",null,[i(f,{size:"sm",color:"gray",onClick:l[8]||(l[8]=o=>n.showShippingModal(null))},{default:p(()=>[h(t(s.$t("add_x",{x:s.$t("Shipping")})),1)]),_:1})])]),e("div",os,[e("table",ls,[e("tr",rs,[e("th",is,t(s.$t("Name")),1),e("th",ns,t(s.$t("Address")),1),e("th",ds,t(s.$t("City")),1),e("th",as,t(s.$t("State")),1),e("th",ps,t(s.$tc("Zipcode")),1),e("th",cs,t(s.$tc("Default")),1),e("th",hs,t(s.$tc("Action")),1)]),(d(!0),a(k,null,C(r.shipping_addresses,o=>(d(),a("tr",{key:r.shipping_addresses.id,onClick:g=>n.setShippingDefault(o.id),class:"cursor-pointer hover:bg-gray-200"},[e("td",us,[e("div",_s,t(o.fname)+" "+t(o.lname),1)]),e("td",fs,t(o.address),1),e("td",gs,t(o.city),1),e("td",bs,t(o.state),1),e("td",ws,t(o.zipcode),1),e("td",xs,[o.is_default?(d(),y(m,{key:0,name:"check",class:"h-5 w-5 fill-green-400"})):_("",!0)]),e("td",ys,[e("div",vs,[i(f,{size:"xs",color:"gray",onClick:w(g=>n.showShippingModal(o),["stop"])},{default:p(()=>[h(t(s.$t("Edit")),1)]),_:2},1032,["onClick"]),i(f,{size:"xs",color:"red",class:"ml-3",onClick:w(g=>n.deleteShipping(o.id),["stop"])},{default:p(()=>[h(t(s.$t("Delete")),1)]),_:2},1032,["onClick"]),i(m,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate ml-3"})])])],8,ms))),128)),r.shipping_addresses.length===0?(d(),a("tr",ks,[e("td",Cs,t(s.$t("no_x_found",{x:s.$tc("Shipping Address")})),1)])):_("",!0)])]),e("div",$s,[e("h2",Bs,t(s.$t("Billing Address")),1),e("div",null,[i(f,{size:"sm",color:"gray",onClick:l[9]||(l[9]=o=>n.showBillingModal(null))},{default:p(()=>[h(t(s.$t("add_x",{x:s.$t("Billing")})),1)]),_:1})])]),e("div",Ss,[e("table",Ms,[e("tr",As,[e("th",Vs,t(s.$t("Name")),1),e("th",Ds,t(s.$t("Address")),1),e("th",Es,t(s.$t("City")),1),e("th",Ls,t(s.$t("State")),1),e("th",Ns,t(s.$tc("Zipcode")),1),e("th",zs,t(s.$tc("Default")),1),e("th",Ts,t(s.$tc("Action")),1)]),(d(!0),a(k,null,C(r.billing_addresses,o=>(d(),a("tr",{key:r.billing_addresses.id,onClick:g=>n.setBillingDefault(o.id),class:"cursor-pointer hover:bg-gray-200"},[e("td",Is,[e("div",Rs,t(o.fname)+" "+t(o.lname),1)]),e("td",Us,t(o.address),1),e("td",Fs,t(o.city),1),e("td",Os,t(o.state),1),e("td",Hs,t(o.zipcode),1),e("td",Zs,[o.is_default?(d(),y(m,{key:0,name:"check",class:"h-5 w-5 fill-green-400"})):_("",!0)]),e("td",Js,[e("div",Ps,[i(f,{size:"xs",color:"gray",onClick:w(g=>n.showBillingModal(o),["stop"])},{default:p(()=>[h(t(s.$t("Edit")),1)]),_:2},1032,["onClick"]),i(f,{size:"xs",color:"red",class:"ml-3",onClick:w(g=>n.deleteBilling(o.id),["stop"])},{default:p(()=>[h(t(s.$t("Delete")),1)]),_:2},1032,["onClick"]),i(m,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate ml-3"})])])],8,js))),128)),r.billing_addresses.length===0?(d(),a("tr",qs,[e("td",Gs,t(s.$t("no_x_found",{x:s.$tc("Billing Address")})),1)])):_("",!0)])]),e("h2",Ks,t(s.$t("Service"))+" "+t(s.$tc("Measurement",2)),1),e("div",Qs,[e("table",Ws,[e("tr",Xs,[e("th",Ys,t(s.$t("Name")),1),e("th",se,t(s.$tc("Service")),1),e("th",ee,t(s.$tc("Field",2)),1),e("th",te,t(s.$tc("Measurement")),1)]),(d(!0),a(k,null,C(u.customer.measurements,o=>(d(),a("tr",{key:o.id,onClick:g=>n.rowClicked(o.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[e("td",le,[e("div",re,[h(t(o.name)+" ",1),o.deleted_at?(d(),y(m,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):_("",!0)])]),e("td",ie,[o.service?(d(),a("div",ne,t(o.service.name),1)):_("",!0)]),e("td",de,[e("span",{class:"whitespace-normal",innerHTML:n.displayExtra(o.extra_attributes)},null,8,ae)]),e("td",pe,t(o.measurement),1),e("td",ce,[i(m,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,oe))),128)),u.customer.measurements.length===0?(d(),a("tr",he,[e("td",me,t(s.$t("no_x_found",{x:s.$tc("Measurement")})),1)])):_("",!0)])]),i($,{show:r.viewShipping,"max-width":"2xl",closeable:!0,onClose:l[11]||(l[11]=o=>r.viewShipping=!1)},{default:p(()=>[i(N,{shippingAddress:r.shippingAddress,show:r.viewShipping,customer_id:u.customer.id,onClose:l[10]||(l[10]=()=>r.viewShipping=!1)},null,8,["shippingAddress","show","customer_id"])]),_:1},8,["show"]),i($,{show:r.viewBilling,"max-width":"2xl",closeable:!0,onClose:l[13]||(l[13]=o=>r.viewBilling=!1)},{default:p(()=>[i(z,{billingAddress:r.billingAddress,show:r.viewBilling,customer_id:u.customer.id,onClose:l[12]||(l[12]=()=>r.viewBilling=!1)},null,8,["billingAddress","show","customer_id"])]),_:1},8,["show"])])}const Ne=q(G,[["render",ue]]);export{Ne as default};
