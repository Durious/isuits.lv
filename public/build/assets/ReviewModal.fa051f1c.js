import{_ as f}from"./lodash.0426edb4.js";import{S as k}from"./VueStarRating.common.df2cc132.js";import{B}from"./Button.49cfcc8c.js";import{T as $}from"./TextInput.f4f909b7.js";import{T as R}from"./TextareaInput.1737678e.js";import{L}from"./LoadingButton.323ea2dd.js";import{_ as N,r as n,o as d,c as _,a as o,t as i,e as m,b as a,n as S,d as T,w as h,f as g}from"./app.d8289e67.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const v={rate:0,title:"",content:"",customer_id:null},j={props:{show:Boolean,review:Object,customers:Object,product_id:Number,modal:{type:Boolean,default:!0}},components:{TextInput:$,TextareaInput:R,LoadingButton:L,StarRating:k,Button:B},data(){return{errors:{},sending:!1,form:v,customer:null}},watch:{show:function(){const e=f.cloneDeep(this.review);this.form=e?{rate:e.rate,title:e.title,content:e.content,customer_id:e.customer_id}:f.cloneDeep(v),e?this.customer=this.customers.find(t=>t.id===parseInt(e.customer_id)):this.customer=null},customer:function(e){var t;this.form.customer_id=(t=e==null?void 0:e.value)!=null?t:null}},methods:{submit(){var e,t;this.sending=!0,this.$inertia.post(this.route("products.save_review",(t=(e=this.review)==null?void 0:e.id)!=null?t:0),{...this.form,product_id:this.product_id},{onSuccess:()=>{this.$emit("close")},onFinish:()=>{this.sending=!1},onError:l=>{this.errors=l}})},deleteReview(){var e,t;this.$inertia.delete(this.route("products.delete_review",(t=(e=this.review)==null?void 0:e.id)!=null?t:0),{onSuccess:()=>{this.$emit("close")}})}}},z={key:0,class:"w-full ltr:text-left rtl:text-right"},D={key:0,class:"np flex justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t"},O={class:"font-bold"},U={class:"flex items-center"},I=o("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[o("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),E=[I],M={class:"w-full px-10"},F={class:"p-2 flex items-center"},P={class:"font-medium text-gray-700 mr-4"},q={class:"p-2"},A={class:"form-label font-medium text-gray-700",for:"customer_id"},G={class:"p-2"},H={class:"p-2"},J={class:"np block xs:flex px-6 py-4 mt-4 bg-gray-100 border-t rounded-b justify-end"};function K(e,t,l,Q,s,u){var c,p;const b=n("star-rating"),w=n("v-select"),y=n("text-input"),x=n("textarea-input"),C=n("Button"),V=n("loading-button");return l.show?(d(),_("div",z,[l.modal?(d(),_("div",D,[o("p",O,i(e.$t("Product Review")),1),o("div",U,[o("a",{class:"modal-close ml-2 cursor-pointer",onClick:t[0]||(t[0]=r=>e.$emit("close"))},E)])])):m("",!0),o("div",M,[o("div",F,[o("span",P,i(e.$t("Rate")),1),a(b,{"star-size":25,rating:s.form.rate,"onUpdate:rating":t[1]||(t[1]=r=>s.form.rate=r),"show-rating":!1},null,8,["rating"])]),o("div",q,[o("label",A,i(e.$tc("Customer")),1),a(w,{transition:"",modelValue:s.customer,"onUpdate:modelValue":t[2]||(t[2]=r=>s.customer=r),clearable:!1,options:l.customers,"input-id":"customer_id","onOption:selected":e.customerChanged,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Customer")}),class:S({error:!1})},null,8,["modelValue","options","onOption:selected","dir","placeholder"])]),o("div",G,[a(y,{label:e.$t("title"),modelValue:s.form.title,"onUpdate:modelValue":t[3]||(t[3]=r=>s.form.title=r),errors:(c=s.errors)==null?void 0:c.title},null,8,["label","modelValue","errors"])]),o("div",H,[a(x,{label:e.$t("Content"),modelValue:s.form.content,"onUpdate:modelValue":t[4]||(t[4]=r=>s.form.content=r),error:(p=s.errors)==null?void 0:p.content},null,8,["label","modelValue","error"])])]),o("div",J,[this.review?(d(),T(C,{key:0,size:"sm",color:"red",onClick:t[5]||(t[5]=r=>u.deleteReview())},{default:h(()=>[g(i(e.$t("Delete")),1)]),_:1})):m("",!0),a(V,{loading:s.sending,class:"btn-gray ml-5",onClick:t[6]||(t[6]=r=>u.submit())},{default:h(()=>[g(i(e.$t("save")),1)]),_:1},8,["loading"]),o("button",{onClick:t[7]||(t[7]=r=>e.$emit("close")),class:"btn-gray ml-5 uppercase"},i(e.$t("Close")),1)])])):m("",!0)}const ne=N(j,[["render",K]]);export{ne as default};
