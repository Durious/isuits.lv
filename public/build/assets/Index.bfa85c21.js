import{L as C,I as M}from"./Layout.c268843b.js";import{p as V}from"./pickBy.bd80f484.js";import{t as B}from"./throttle.7e7db953.js";import{S as F,m as I}from"./SearchFilter.6af03689.js";import{P as j}from"./Pagination.cc1280e3.js";import{M as L}from"./Modal.44e047a5.js";import{F as D}from"./FileInput.bfc636d8.js";import{B as N}from"./Button.49cfcc8c.js";import{L as T}from"./LoadingButton.323ea2dd.js";import{_ as O,r as a,o as d,c as _,a as e,t as o,b as n,w as m,F as P,g as U,e as b,d as w,f,n as A,k as E}from"./app.d8289e67.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./debounce.9b400763.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const R={layout:C,props:{services:Object,filters:Object},components:{Icon:M,Pagination:j,SearchFilter:F,Modal:L,FileInput:D,Button:N,LoadingButton:T},metaInfo(){return{title:this.$tc("Service",2)}},data(){return{form:{search:this.filters.search,trashed:this.filters.trashed,csv:null},viewModal:!1,sending:!1}},watch:{form:{handler:B(function(){let t=V(this.form);this.$inertia.replace(this.route("services",Object.keys(t).length?t:{remember:"forget"}))},250),deep:!0}},methods:{rowClicked(t){this.$inertia.visit(this.route("services.edit",t))},reset(){this.form=I(this.form,()=>null)},closeModal(){this.viewModal=!1,this.sending=!1},importServices(){this.form.csv=null,this.viewModal=!0},async exportServices(){this.$axios.post(this.route("services.export")).then(t=>{const r=new Date,c=r.getFullYear(),y=(r.getMonth()+1).toString().padStart(2,"0"),l=r.getDate().toString().padStart(2,"0"),i=r.getHours().toString().padStart(2,"0"),v=r.getMinutes().toString().padStart(2,"0"),g=r.getSeconds().toString().padStart(2,"0"),u=`services_${c}_${y}_${l}_${i}_${v}_${g}.csv`;var p="\uFEFF",h=window.document.createElement("a");h.setAttribute("href","data:text/csv; charset=utf-8,"+encodeURIComponent(p+t.data)),h.setAttribute("download",u),window.document.body.appendChild(h),h.click()})},submit(){if(!this.sending&&!!this.form.csv){this.sending=!0;var t=new FormData;t.append("csv",this.form.csv||""),this.$inertia.post(this.route("services.import"),t,{onFinish:r=>{const c=this;setTimeout(function(){c.viewModal=!1},2e3),this.sending=!1}})}}}},z={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},q={class:"np mb-6 flex justify-between items-center"},H={class:"block text-gray-700"},W={class:"inline md:hidden"},Y={class:"hidden md:inline"},G={class:"bg-white rounded shadow overflow-x-auto scroll-on-light"},J={class:"w-full whitespace-no-wrap"},K={class:"text-left font-bold"},Q={class:"px-6 pt-6 pb-4"},X={class:"px-6 pt-6 pb-4"},Z={class:"px-6 pt-6 pb-4"},tt={class:"px-6 pt-6 pb-4"},et={class:"px-6 pt-6 pb-4 text-right"},st={class:"px-6 pt-6 pb-4",colspan:"2"},ot=["onClick"],rt={class:"border-t px-6 py-4"},lt={class:"flex items-center"},nt={class:"border-t px-6 py-4"},it={class:"border-t px-6 py-4"},at=["src"],ct={class:"border-t px-6 py-4"},dt={class:"border-t px-6 py-4"},mt={class:"flex items-center justify-end"},pt={class:"text-right"},ht={class:"border-t px-6 py-4 max-w-lg truncate"},ut={class:"border-t px-6 py-4 w-8"},ft={key:0},_t={class:"border-t px-6 py-4",colspan:"5"},bt={class:"px-8 pb-8 pt-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},vt={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end"};function gt(t,r,c,y,l,i){const v=a("v-select"),g=a("search-filter"),u=a("Button"),p=a("Icons"),h=a("Link"),x=a("pagination"),k=a("file-input"),S=a("loading-button"),$=a("Modal");return d(),_("div",null,[e("h1",z,o(t.$tc("Service",2)),1),e("div",q,[n(g,{modelValue:l.form.search,"onUpdate:modelValue":r[1]||(r[1]=s=>l.form.search=s),class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:i.reset},{default:m(()=>[e("label",H,o(t.$t("Trashed")),1),n(v,{modelValue:l.form.trashed,"onUpdate:modelValue":r[0]||(r[0]=s=>l.form.trashed=s),options:[{value:"",label:"Not Trashed"},{value:"with",label:t.$t("With Trashed")},{value:"only",label:t.$t("Only Trashed")}],reduce:s=>s.value},null,8,["modelValue","options","reduce"])]),_:1},8,["modelValue","onReset"]),e("div",null,[n(u,{class:"btn-gray mr-4",type:"button",onClick:i.importServices},{default:m(()=>[f(o(t.$t("import_x",{x:t.$tc("Service")})),1)]),_:1},8,["onClick"]),n(u,{class:"btn-gray mr-4",type:"button",onClick:i.exportServices},{default:m(()=>[f(o(t.$t("export_x",{x:t.$tc("Service")})),1)]),_:1},8,["onClick"]),n(h,{class:"btn-gray",href:t.route("services.create")},{default:m(()=>[e("span",W,[n(p,{name:"add",class:"w-4 h-4 text-white fill-white group-hover:text-white fill-white"})]),e("span",Y,o(t.$t("create_x",{x:t.$tc("Service")})),1)]),_:1},8,["href"])])]),e("div",G,[e("table",J,[e("thead",null,[e("tr",K,[e("th",Q,o(t.$t("Code")),1),e("th",X,o(t.$t("Name")),1),e("th",Z,o(t.$t("Image")),1),e("th",tt,o(t.$t("Status")),1),e("th",et,o(t.$t("Price")),1),e("th",st,o(t.$t("Description")),1)])]),e("tbody",null,[(d(!0),_(P,null,U(c.services.data,s=>(d(),_("tr",{key:s.id,onClick:wt=>i.rowClicked(s.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[e("td",rt,[e("div",lt,[f(o(s.code)+" ",1),s.deleted_at?(d(),w(p,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):b("",!0)])]),e("td",nt,o(s.name),1),e("td",it,[e("img",{src:"/storage/service/"+s.photo,alt:"service-photo",class:"h-12 object-contain"},null,8,at)]),e("td",ct,[e("span",{class:A(`${s.active==1?"bg-green-200":"bg-red-200"} rounded text-sm py-1 px-2`)},o(s.active==1?t.$t("Active"):t.$t("Deactive")),3)]),e("td",dt,[e("div",mt,[s.active?(d(),w(p,{key:0,name:"check",class:"flex-shrink-0 w-3 h-3 fill-green-600 ltr:mr-2 rtl:ml-2"})):b("",!0),e("div",pt,o(t.$number(s.price)),1)])]),e("td",ht,o(s.description),1),e("td",ut,[n(p,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,ot))),128)),c.services.data.length===0?(d(),_("tr",ft,[e("td",_t,o(t.$t("no_x_found",{x:t.$tc("Service")})),1)])):b("",!0)])])]),n(x,{links:c.services.links,meta:c.services.meta},null,8,["links","meta"]),l.viewModal?(d(),w($,{key:0,show:l.viewModal,"max-width":"2xl",closeable:!0,onClose:r[4]||(r[4]=()=>l.viewModal=!1)},{default:m(()=>[e("form",{onSubmit:r[3]||(r[3]=E((...s)=>i.submit&&i.submit(...s),["prevent"])),autocomplete:"off"},[e("div",bt,[n(k,{type:"file",accept:"text/csv",label:t.$t("Pick CSV file."),modelValue:l.form.csv,"onUpdate:modelValue":r[2]||(r[2]=s=>l.form.csv=s),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue"])]),e("div",vt,[n(S,{loading:l.sending,class:"btn-gray",type:"submit"},{default:m(()=>[f(o(t.$t("import_x",{x:t.$tc("Services")})),1)]),_:1},8,["loading"]),n(u,{class:"btn-gray ml-4",type:"button",onClick:i.closeModal},{default:m(()=>[f(o(t.$tc("Close")),1)]),_:1},8,["onClick"])])],32)]),_:1},8,["show"])):b("",!0)])}const Tt=O(R,[["render",gt]]);export{Tt as default};
