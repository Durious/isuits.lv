import{_ as p}from"./lodash.0426edb4.js";import{B as y}from"./Button.49cfcc8c.js";import{T as k}from"./TextInput.f4f909b7.js";import{T as x}from"./TextareaInput.1737678e.js";import{L as B}from"./LoadingButton.323ea2dd.js";import{_ as $,r as i,o as m,c as f,a as o,t as l,e as c,b as d,n as V,d as L,w as h,f as _}from"./app.d8289e67.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const b={comment:"",customer_id:null},N={props:{show:Boolean,comment:Object,customers:Object,product_id:Number,modal:{type:Boolean,default:!0}},components:{TextInput:k,TextareaInput:x,LoadingButton:B,Button:y},data(){return{errors:{},sending:!1,form:b,customer:null}},watch:{show:function(){const e=p.cloneDeep(this.comment);this.form=e?{comment:e.comment,customer_id:e.customer_id}:p.cloneDeep(b),e?this.customer=this.customers.find(t=>t.id===parseInt(e.customer_id)):this.customer=null},customer:function(e){var t;this.form.customer_id=(t=e==null?void 0:e.value)!=null?t:null}},mounted(){console.log(this.show)},methods:{submit(){var e,t;this.sending=!0,this.$inertia.post(this.route("products.save_comment",(t=(e=this.comment)==null?void 0:e.id)!=null?t:0),{...this.form,product_id:this.product_id},{onSuccess:()=>{this.$emit("close")},onFinish:()=>{this.sending=!1},onError:r=>{this.errors=r}})},deleteComment(){var e,t;this.$inertia.delete(this.route("products.delete_comment",(t=(e=this.comment)==null?void 0:e.id)!=null?t:0),{onSuccess:()=>{this.$emit("close")}})}}},T={key:0,class:"w-full ltr:text-left rtl:text-right"},j={key:0,class:"np flex justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t"},D={class:"font-bold"},O={class:"flex items-center"},z=o("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[o("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),I=[z],S={class:"w-full px-10"},E={class:"p-2"},M={class:"form-label font-medium text-gray-700",for:"customer_id"},U={class:"p-2"},F={class:"np block xs:flex px-6 py-4 mt-4 bg-gray-100 border-t rounded-b justify-end"};function P(e,t,r,q,n,a){var u;const g=i("v-select"),v=i("textarea-input"),C=i("Button"),w=i("loading-button");return r.show?(m(),f("div",T,[r.modal?(m(),f("div",j,[o("p",D,l(e.$t("Product Comment")),1),o("div",O,[o("a",{class:"modal-close ml-2 cursor-pointer",onClick:t[0]||(t[0]=s=>e.$emit("close"))},I)])])):c("",!0),o("div",S,[o("div",E,[o("label",M,l(e.$tc("Customer")),1),d(g,{transition:"",modelValue:n.customer,"onUpdate:modelValue":t[1]||(t[1]=s=>n.customer=s),clearable:!1,options:r.customers,"input-id":"customer_id","onOption:selected":e.customerChanged,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Customer")}),class:V({error:!1})},null,8,["modelValue","options","onOption:selected","dir","placeholder"])]),o("div",U,[d(v,{label:e.$t("Comment"),modelValue:n.form.comment,"onUpdate:modelValue":t[2]||(t[2]=s=>n.form.comment=s),error:(u=n.errors)==null?void 0:u.comment},null,8,["label","modelValue","error"])])]),o("div",F,[this.comment?(m(),L(C,{key:0,size:"sm",color:"red",onClick:t[3]||(t[3]=s=>a.deleteComment())},{default:h(()=>[_(l(e.$t("Delete")),1)]),_:1})):c("",!0),d(w,{loading:n.sending,class:"btn-gray ml-5",onClick:t[4]||(t[4]=s=>a.submit())},{default:h(()=>[_(l(e.$t("save")),1)]),_:1},8,["loading"]),o("button",{onClick:t[5]||(t[5]=s=>e.$emit("close")),class:"btn-gray ml-5 uppercase"},l(e.$t("Close")),1)])])):c("",!0)}const X=$(N,[["render",P]]);export{X as default};
