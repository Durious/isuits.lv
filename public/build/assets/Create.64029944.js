import{g as D}from"./debounce.9b400763.js";import{L as E}from"./Layout.c268843b.js";import{T as z}from"./TextInput.f4f909b7.js";import{F as W}from"./FileInput.bfc636d8.js";import{T as q}from"./TextareaInput.1737678e.js";import{L as A}from"./LoadingButton.323ea2dd.js";import{_ as G,r as i,o as a,c as m,a as t,b as s,w as T,f as c,t as p,k as H,n as B,e as f,F as J,g as K}from"./app.d8289e67.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";const Q={layout:E,props:{icategories:Object},components:{LoadingButton:A,TextInput:z,FileInput:W,TextareaInput:q},data(){return{errors:{},sending:!1,form:{name:null,price:0,main_photo:null,description:null,category_id:null,type:null,sub_photos:[]},categories:[],category:null,types:[{label:"Men",value:"men"},{label:"Women",value:"women"}],type:null}},watch:{category:function(e){this.form.category_id=e?e.value:null},type:function(e){this.form.type=e?e.value:null}},mounted(){this.categories=this.icategories},methods:{addOption(){this.form.sub_photos.push({file:""})},removeOption(){this.form.sub_photos.pop()},submit(){this.sending=!0;var e=new FormData;e.append("main_photo",this.form.main_photo||""),e.append("name",this.form.name||""),e.append("price",this.form.price||0),e.append("type",this.form.type||""),e.append("category_id",this.form.category_id||""),e.append("description",this.form.description||""),this.form.sub_photos.forEach((o,u)=>{e.append(`sub_photos[${u}]`,o.file||"")}),this.$inertia.post(this.route("products.store"),e,{onError:o=>{this.errors=o},onFinish:()=>{this.sending=!1}})},searchCategories(e,o){e&&(o(!0),this.searchingCategories(o,e,this))},searchingCategories:D((e,o,u)=>{fetch(u.route("ajax.categories")+"?search="+escape(o)).then(h=>{h.json().then(r=>u.categories=r),e(!1)})},350)}},R={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},X=t("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),Y={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},Z={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},$={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ee={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},re={class:"form-label",for:"category_id"},oe={key:0,class:"form-error"},te={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},le={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},se={class:"form-label",for:"type"},ne={key:0,class:"form-error"},ie={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},pe={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ae={class:"w-full flex items-center justify-end mt-5 mb-6 gap-4 ltr:pr-6 rtl:pl-6"},me=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),ue=[me],de=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12h-15"})],-1),ce=[de],fe={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},he={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end items-center"};function ge(e,o,u,h,r,n){var _,w,x,v,V,k,C,U,j,F,L,O;const I=i("Icons"),M=i("Link"),g=i("text-input"),b=i("v-select"),y=i("file-input"),N=i("textarea-input"),P=i("loading-button");return a(),m("div",null,[t("h1",R,[s(M,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:e.route("products")},{default:T(()=>[s(I,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),c(" "+p(e.$tc("Product",2)),1)]),_:1},8,["href"]),X,c(" "+p(e.$t("Create")),1)]),t("div",Y,[t("form",{onSubmit:o[8]||(o[8]=H((...l)=>n.submit&&n.submit(...l),["prevent"])),autocomplete:"off"},[t("div",Z,[s(g,{modelValue:r.form.name,"onUpdate:modelValue":o[0]||(o[0]=l=>r.form.name=l),errors:(_=r.errors)==null?void 0:_.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full",label:e.$t("Name")},null,8,["modelValue","errors","label"])]),t("div",$,[t("div",ee,[t("label",re,p(e.$tc("Category")),1),s(b,{modelValue:r.category,"onUpdate:modelValue":o[1]||(o[1]=l=>r.category=l),options:r.categories,"input-id":"category_id",onSearch:n.searchCategories,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Category",2)}),class:B({error:((w=r.errors)==null?void 0:w.category_id)&&((x=r.errors)==null?void 0:x.category_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),(v=r.errors)!=null&&v.category_id?(a(),m("div",oe,p((V=r.errors)==null?void 0:V.category_id),1)):f("",!0)])]),t("div",te,[t("div",le,[t("label",se,p(e.$tc("Type")),1),s(b,{modelValue:r.type,"onUpdate:modelValue":o[2]||(o[2]=l=>r.type=l),options:r.types,"input-id":"type",dir:e.$page.props.user.account.direction,placeholder:e.$t("select_x",{x:e.$tc("Type",1)}),class:B({error:((k=r.errors)==null?void 0:k.type)&&((C=r.errors)==null?void 0:C.type.length)})},null,8,["modelValue","options","dir","placeholder","class"]),(U=r.errors)!=null&&U.type?(a(),m("div",ne,p((j=r.errors)==null?void 0:j.type),1)):f("",!0)])]),t("div",ie,[s(g,{type:"number",label:e.$t("Price"),enableFloat:!0,modelValue:r.form.price,"onUpdate:modelValue":o[3]||(o[3]=l=>r.form.price=l),errors:(F=r.errors)==null?void 0:F.price,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","errors"])]),t("div",pe,[s(y,{type:"file",accept:"image/*",label:e.$t("Main Photo"),modelValue:r.form.main_photo,"onUpdate:modelValue":o[4]||(o[4]=l=>r.form.main_photo=l),error:(L=r.errors)==null?void 0:L.main_photo,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","error"])]),(a(!0),m(J,null,K(r.form.sub_photos,(l,d)=>(a(),m("div",{key:d,class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},[s(y,{type:"file",accept:"image/*",label:e.$t("Sub Photo")+" "+(d+1),modelValue:l.file,"onUpdate:modelValue":S=>l.file=S,error:r.errors["sub_photos."+d],class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","onUpdate:modelValue","error"])]))),128)),t("div",ae,[r.form.sub_photos.length<3?(a(),m("button",{key:0,type:"button",onClick:o[5]||(o[5]=(...l)=>n.addOption&&n.addOption(...l)),class:"bg-gray-700 px-3 py-1.5 rounded-md text-gray-50 hover:bg-gray-800"},ue)):f("",!0),t("button",{type:"button",onClick:o[6]||(o[6]=(...l)=>n.removeOption&&n.removeOption(...l)),class:"bg-gray-700 px-3 py-1.5 rounded-md text-gray-50 hover:bg-gray-800"},ce)]),t("div",fe,[s(N,{label:e.$t("Description"),modelValue:r.form.description,"onUpdate:modelValue":o[7]||(o[7]=l=>r.form.description=l),errors:(O=r.errors)==null?void 0:O.description,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","errors"])]),t("div",he,[s(P,{loading:r.sending,class:"btn-gray",type:"submit"},{default:T(()=>[c(p(e.$t("create_x",{x:e.$tc("Product")})),1)]),_:1},8,["loading"])])],32)])])}const Fe=G(Q,[["render",ge]]);export{Fe as default};
