import{L as B}from"./Layout.c268843b.js";import{d as I}from"./DeleteMixin.d312fa19.js";import{T as N}from"./TextInput.f4f909b7.js";import{F as j}from"./FileInput.bfc636d8.js";import{L as E}from"./LoadingButton.323ea2dd.js";import{C as O}from"./CheckboxInput.0509202e.js";import{T as A}from"./TrashedMessage.7363da80.js";import{D as P}from"./DeleteRestoreComponent.725db004.js";import q from"./ReviewModal.b0f2e6b0.js";import{M as z}from"./Modal.44e047a5.js";import{_ as G,r as n,o as c,d as f,w as p,a as o,b as i,f as w,t as l,e as h,k as H,c as b,g as J,F as K}from"./app.d8289e67.js";import"./Dropdown.48a14283.js";import"./FlashMessages.3029884e.js";import"./InputError.b5dfb222.js";import"./Input.954bfb09.js";import"./Dialog.05b0b37c.js";import"./lodash.0426edb4.js";import"./VueStarRating.common.df2cc132.js";import"./Button.49cfcc8c.js";import"./TextareaInput.1737678e.js";const Q={mixins:[I("service")],props:{service:Object,customers:Array,icustomers:Object,ireviews:Object},components:{Layout:B,LoadingButton:E,TextInput:N,TrashedMessage:A,CheckboxInput:O,DeleteRestoreComponent:P,FileInput:j,ReviewModal:q,Modal:z},data(){var t,s,m,v,e,d,a;return{errors:{},restore:!1,sending:!1,form:{id:(t=this.service)==null?void 0:t.id,code:(s=this.service)==null?void 0:s.code,name:(m=this.service)==null?void 0:m.name,price:(v=this.service)==null?void 0:v.price,photo:(e=this.service)==null?void 0:e.photo,description:(d=this.service)==null?void 0:d.description,active:((a=this.service)==null?void 0:a.active)==1},reviews:[],review:null,viewReview:!1}},watch:{ireviews:function(t){this.reviews=t}},mounted(){this.reviews=this.ireviews},methods:{submit(){this.sending=!0,this.$inertia.post(this.form.id?route("services.update",this.service.id):route("services.store"),this.form,{onSuccess:()=>this.errors={},onFinish:()=>this.sending=!1,onError:t=>this.errors=t})},showReviewModal(t){this.review=this.reviews.find(s=>s.id===t),this.viewReview=!0}}},W={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},X=o("span",{class:"text-gray-400 font-medium mx-1"},"/",-1),Y={class:"w-full flex flex-wrap"},Z={class:"bg-white rounded shadow w-full overflow-hidden md:w-2/5"},$={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},ee={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},te={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"},oe={class:"w-full md:w-3/5 md:pl-5"},se={class:"bg-white rounded shadow"},re={class:"flex items-center justify-between"},le={class:"font-bold text-lg px-6 pt-6 pb-4"},ie={class:"overflow-x-auto scroll-on-light"},ne={class:"w-full whitespace-no-wrap"},me={class:"text-left font-bold"},ce={class:"px-6 pt-6 pb-4"},de={class:"px-6 pt-6 pb-4"},ae={class:"px-6 pt-6 pb-4"},pe={class:"px-6 pt-6 pb-4",colspan:"2"},ue=["onClick"],fe={class:"border-t px-6 py-4"},he={class:"flex items-center"},ve={class:"border-t px-6 py-4"},we={class:"border-t px-6 py-4"},be={class:"border-t px-6 py-4 max-w-md truncate"},_e={class:"border-t px-6 py-4 w-8"},xe={key:0},ge={class:"border-t px-6 py-4",colspan:"5"};function ye(t,s,m,v,e,d){const a=n("Icons"),V=n("Link"),C=n("trashed-message"),u=n("text-input"),M=n("file-input"),L=n("checkbox-input"),S=n("DeleteRestoreComponent"),D=n("loading-button"),F=n("ReviewModal"),T=n("Modal"),U=n("layout");return c(),f(U,{title:e.form.id?t.$t("update_x",{x:e.form.name}):t.$t("create_x",{x:t.$t("service")})},{default:p(()=>{var _,x,g,y,k,R;return[o("div",null,[o("h1",W,[i(V,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:t.route("services")},{default:p(()=>[i(a,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),w(" "+l(t.$tc("Service",2)),1)]),_:1},8,["href"]),X,o("span",null,l(e.form.id?e.form.name:t.$t("create_x",{x:t.$t("service")})),1)]),(_=m.service)!=null&&_.deleted_at?(c(),f(C,{key:0,class:"mb-6",onRestore:s[0]||(s[0]=()=>e.restore=!0)},{default:p(()=>[o("span",null,l(t.$t("already_deleted_x",{x:t.$tc("Service")})),1)]),_:1})):h("",!0),o("div",Y,[o("div",Z,[o("form",{onSubmit:s[8]||(s[8]=H((...r)=>d.submit&&d.submit(...r),["prevent"])),autocomplete:"off"},[o("div",$,[i(u,{modelValue:e.form.code,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.code=r),error:(x=e.errors)==null?void 0:x.code,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2",label:t.$t("Code")},null,8,["modelValue","error","label"]),i(u,{modelValue:e.form.name,"onUpdate:modelValue":s[2]||(s[2]=r=>e.form.name=r),error:(g=e.errors)==null?void 0:g.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2",label:t.$t("Name")},null,8,["modelValue","error","label"])]),o("div",ee,[i(u,{modelValue:e.form.price,"onUpdate:modelValue":s[3]||(s[3]=r=>e.form.price=r),error:(y=e.errors)==null?void 0:y.price,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full",label:t.$t("Price")},null,8,["modelValue","error","label"]),i(M,{type:"file",accept:"image/*",label:t.$t("Photo"),modelValue:e.form.photo,"onUpdate:modelValue":s[4]||(s[4]=r=>e.form.photo=r),error:(k=e.errors)==null?void 0:k.photo,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-full"},null,8,["label","modelValue","error"]),i(u,{label:t.$t("Description"),modelValue:e.form.description,"onUpdate:modelValue":s[5]||(s[5]=r=>e.form.description=r),error:(R=e.errors)==null?void 0:R.description,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","error"]),i(L,{id:"active",label:t.$t("Active"),checked:e.form.active,"onUpdate:checked":s[6]||(s[6]=r=>e.form.active=r),class:"mb-8"},null,8,["label","checked"])]),o("div",te,[m.service?(c(),f(S,{key:0,restore:e.restore,data:m.service,permanentEnable:!1,model:"Service",routeM:"services",onCloseRestore:s[7]||(s[7]=()=>e.restore=!1)},null,8,["restore","data"])):h("",!0),i(D,{loading:e.sending,class:"btn-gray ltr:ml-auto rtl:mr-auto",type:"submit"},{default:p(()=>[w(l(e.form.id?t.$t("update_x",{x:t.$t("service")}):t.$t("create_x",{x:t.$t("service")})),1)]),_:1},8,["loading"])])],32)]),o("div",oe,[o("div",se,[o("div",re,[o("h3",le,l(t.$t("Service Reviews")),1)]),o("div",ie,[o("table",ne,[o("tr",me,[o("th",ce,l(t.$t("Customer")),1),o("th",de,l(t.$tc("Title")),1),o("th",ae,l(t.$tc("Rate")),1),o("th",pe,l(t.$tc("Content")),1)]),(c(!0),b(K,null,J(e.reviews,r=>(c(),b("tr",{key:r.id,onClick:ke=>d.showReviewModal(r.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[o("td",fe,[o("div",he,[w(l(r.customer.name)+" ",1),r.deleted_at?(c(),f(a,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):h("",!0)])]),o("td",ve,l(r.title),1),o("td",we,l(r.rate),1),o("td",be,l(r.content),1),o("td",_e,[i(a,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,ue))),128)),e.reviews.length===0?(c(),b("tr",xe,[o("td",ge,l(t.$t("no_x_found",{x:t.$tc("Review")})),1)])):h("",!0)])])])])]),i(T,{show:e.viewReview,"max-width":"2xl",closeable:!0,onClose:s[10]||(s[10]=r=>e.viewReview=!1)},{default:p(()=>[i(F,{review:e.review,show:e.viewReview,customers:m.icustomers,service_id:m.service.id,onClose:s[9]||(s[9]=()=>e.viewReview=!1)},null,8,["review","show","customers","service_id"])]),_:1},8,["show"])])]}),_:1},8,["title"])}const Ge=G(Q,[["render",ye]]);export{Ge as default};
